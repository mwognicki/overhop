# Overhop default runtime configuration.
# Every value can be overridden from argv using dotted keys:
#   --logging.level info
#   --logging.human_friendly true
#   --heartbeat.interval_ms 250
#   --server.host 127.0.0.1
#   --server.port 9999
#   --server.tls_enabled false
#   --wire.max_envelope_size_bytes 1048576
#   --wire.session.unhelloed_max_lifetime_seconds 10
#   --wire.session.helloed_unregistered_max_lifetime_seconds 10
#   --wire.session.ident_register_timeout_seconds 2
#   --storage.engine sled
#   --storage.path ~/.overhop/data
#   --storage.sled.cache_capacity 1073741824
#   --storage.sled.mode low_space
#
# Runtime-only flags:
#   --self-debug

[logging]
# Allowed: error, warn, info, debug, verbose
level = "debug"
# true => colorful/human-friendly output
# false => plain output (default)
human_friendly = false

[heartbeat]
# Allowed range: 100..=1000 milliseconds
interval_ms = 1000

[server]
# TCP bind host
host = "0.0.0.0"
# TCP bind port
port = 9876
# TLS transport flag (currently must remain false until TLS support lands)
tls_enabled = false

[wire]
# Maximum MessagePack envelope payload size in bytes.
# Allowed range: 65536..=33554432 (64 KiB..=32 MiB)
# Default: 8388608 (8 MiB)
max_envelope_size_bytes = 8388608
[wire.session]
# Maximum lifespan for anonymous connections that did not send HELLO yet
unhelloed_max_lifetime_seconds = 10
# Maximum lifespan for HELLOed but still unregistered anonymous connections
helloed_unregistered_max_lifetime_seconds = 10
# Allowed REGISTER timeout after IDENT challenge is sent
ident_register_timeout_seconds = 2

[storage]
# Storage backend engine (currently hard-fixed to sled)
engine = "sled"
# Default persistent data path. "~/" and "$HOME/" prefixes are supported.
path = "~/.overhop/data"

[storage.sled]
# Optional sled cache capacity in bytes (unset => sled default)
# cache_capacity = 1073741824
# Optional mode (unset => sled default)
# Allowed: low_space, high_throughput
# mode = "low_space"
